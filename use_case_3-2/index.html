<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Use Case 3-2 - Metavisitor-2</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Use Case 3-2";
    var mkdocs_page_input_path = "use_case_3-2.md";
    var mkdocs_page_url = "/metavisitor/use_case_3-2/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Metavisitor-2</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Metavisitor</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../metavisitor_configure_references/">Prepare Metavisitor Galaxy instance for analyses</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../use_cases_input_data/">Prepare input data histories</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../use_case_1/">Use Cases 1-1 to 1-4</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../use_case_2/">Use Cases 2-1 and 2-2</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../use_case_3-1/">Use Case 3-1</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Use Case 3-2</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#use-case-3-2s-aim">Use Case 3-2's aim</a></li>
    

    <li class="toctree-l2"><a href="#input-data-for-use-case-3-2">Input data for Use Case 3-2</a></li>
    

    <li class="toctree-l2"><a href="#history-for-use-case-3-2">History for Use Case 3-2</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../use_case_3-3/">Use Case 3-3</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Install_Metavisitor</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../install_metavisitor/">Intro</a>
                </li>
                <li class="">
                    
    <a class="" href="../metavisitor_ansible/">GalaxyKickStart</a>
                </li>
                <li class="">
                    
    <a class="" href="../metavisitor_docker/">Docker</a>
                </li>
                <li class="">
                    
    <a class="" href="../metavisitor_access_control/">Access and Control Metavisitor Galaxy instance</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Metavisitor-2</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Use Case 3-2</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/ARTbio/metavisitor/edit/master/docs/use_case_3-2.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h4 id="use-case-3-2s-aim">Use Case 3-2's aim</h4>
<p>In this Use Case, Metavisitor is used to search for the presence of viruses and identify them in RNA sequencing data of serums of children suffering from fevers of unknown origins. To compare Metavisitor's results to <a href="https://dx.doi.org/10.1371%2Fjournal.pntd.0001485">Yozwiak <em>et al</em></a>.</p>
<hr />
<h2 id="input-data-for-use-case-3-2">Input data for Use Case 3-2</h2>
<p>As for the previous Use Cases 1, 2 and 3-1, the first step is to collect all input data in an history that we will name <code>Input data for Use Case 3-2</code>.</p>
<ul>
<li>Create a new history</li>
<li>Rename this history <code>Input data for Use Case 3-2</code></li>
<li>Using the tool <code>Extract reads in FASTQ/A format from NCBI SRA</code>, we are going to upload 43 paired end datasets. Indeed, these 43 datasets correspond to 86 fastq paired-ended sequence files. In addition, some datasets derive from the same patient; in those cases we will merge those datasets using the tool <code>Concatenate multiple datasets tail-to-head</code> and delete and purge the original datasets.</li>
<li>
<p>Open the "Upload datasets" menu. Click on the <code>Paste/Fetch data</code> button, name the file "Use-Case_3-2_SRR_information" and copy-paste the following text:</p>
<table>
<thead>
<tr>
<th>SRR id</th>
<th>Patient id</th>
</tr>
</thead>
<tbody>
<tr>
<td>SRR453487</td>
<td>patient 566</td>
</tr>
<tr>
<td>SRR453437</td>
<td>patient 438</td>
</tr>
<tr>
<td>SRR453443</td>
<td>patient 401</td>
</tr>
<tr>
<td>SRR453458</td>
<td>patient 401</td>
</tr>
<tr>
<td>SRR453430</td>
<td>patient 382</td>
</tr>
<tr>
<td>SRR453491</td>
<td>patient 377</td>
</tr>
<tr>
<td>SRR453499</td>
<td>patient 375</td>
</tr>
<tr>
<td>SRR453484</td>
<td>patient 350</td>
</tr>
<tr>
<td>SRR453464</td>
<td>patient 349</td>
</tr>
<tr>
<td>SRR453506</td>
<td>patient 345</td>
</tr>
<tr>
<td>SRR453417</td>
<td>patient 344</td>
</tr>
<tr>
<td>SRR453490</td>
<td>patient 335</td>
</tr>
<tr>
<td>SRR453478</td>
<td>patient 331</td>
</tr>
<tr>
<td>SRR453465</td>
<td>patient 330</td>
</tr>
<tr>
<td>SRR453480</td>
<td>patient 330</td>
</tr>
<tr>
<td>SRR453489</td>
<td>patient 329</td>
</tr>
<tr>
<td>SRR453505</td>
<td>patient 329</td>
</tr>
<tr>
<td>SRR453498</td>
<td>patient 322</td>
</tr>
<tr>
<td>SRR453446</td>
<td>patient 321</td>
</tr>
<tr>
<td>SRR453427</td>
<td>patient 315</td>
</tr>
<tr>
<td>SRR453440</td>
<td>patient 315</td>
</tr>
<tr>
<td>SRR453438</td>
<td>patient 282</td>
</tr>
<tr>
<td>SRR453450</td>
<td>patient 275</td>
</tr>
<tr>
<td>SRR453460</td>
<td>patient 274</td>
</tr>
<tr>
<td>SRR453485</td>
<td>patient 270</td>
</tr>
<tr>
<td>SRR453448</td>
<td>patient 266</td>
</tr>
<tr>
<td>SRR453424</td>
<td>patient 263</td>
</tr>
<tr>
<td>SRR453457</td>
<td>patient 263</td>
</tr>
<tr>
<td>SRR453510</td>
<td>patient 193</td>
</tr>
<tr>
<td>SRR453456</td>
<td>patient 187</td>
</tr>
<tr>
<td>SRR453425</td>
<td>patient 186</td>
</tr>
<tr>
<td>SRR453469</td>
<td>patient 186</td>
</tr>
<tr>
<td>SRR453481</td>
<td>patient 183</td>
</tr>
<tr>
<td>SRR453531</td>
<td>patient 180</td>
</tr>
<tr>
<td>SRR453474</td>
<td>patient 179</td>
</tr>
<tr>
<td>SRR453509</td>
<td>patient 171</td>
</tr>
<tr>
<td>SRR453451</td>
<td>patient 168</td>
</tr>
<tr>
<td>SRR453495</td>
<td>patient 161</td>
</tr>
<tr>
<td>SRR453504</td>
<td>patient 161</td>
</tr>
<tr>
<td>SRR453500</td>
<td>patient 159</td>
</tr>
<tr>
<td>SRR453493</td>
<td>patient 156</td>
</tr>
<tr>
<td>SRR453444</td>
<td>patient 131</td>
</tr>
<tr>
<td>SRR453426</td>
<td>patient 78</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click the <code>Start</code> button.</p>
</li>
<li>Select the <code>Cut columns from a table</code> tool and set the "Cut columns" parameter to "c1" and select "Use-Case_3-2_SRR_information" as input file in the "From" list. Execute the tool and rename the new dataset collection "Use_Case_3-2_accessions".</li>
<li>Select the tool <code>Download and Extract Reads in FASTA/Q format from NCBI SRA</code>and select "List of SRA accession, one per line" in "select input type" and "Use_Case_3-2_accessions" in "sra accession list". Execute the tool. The data downloading step might take 40 minutes to 1h. Delete "Single-end data (fastq-dump)".</li>
<li>Select the <code>Concatenate multiple datasets tail-to-head</code> tool and set "Paired collection" in "What type of data do you wish to concatenate?" and "Pair-end data (fastq-dump)" as "Input paired collection to concatenate". In "What type of concatenation do you wish to perform?" select "Concatenate pairs of datasets (outputs an unpaired collection of datasets)". Execute the tool.</li>
<li>Select <code>Tag elements from file</code> tool and set "Concatenation by pairs" as "Input Collection" and "Use-Case_3-2_SRR_information" as "Tag collection elements according to this file". Execute the tool.</li>
<li>Select <code>Apply Rule to Collection</code> tool and set "data 1, data 144, and others (Tagged)" as "Input Collection" and click the "Edit" button.<ul>
<li>Click the "Column" button and select "Add Column from Metadata" from the list.</li>
<li>Select "Tags" from the "For" list and click the "Apply" button.</li>
<li>Click the "Rules" button and select "Add / Modify Column Definitions".</li>
<li>Click "Add Definitions" button and select "List identifier(s)" from the list.</li>
<li>Select "B" from the "Select a column" list.</li>
<li>Click "<em>... Assign Another Column</em>" and select "A" from the "Select column" list. Click the "Apply" button and the "Save" button. Execute the tool.</li>
</ul>
</li>
<li>Select the <code>Conatenate multiple datasets tail-to-head</code> tool ans set "Nested collection" in "What type of data do you wish to concatenate?" and select the "... (re-organized)" dataset collection in "Input nested collection". Click the "Execute" button.</li>
<li>Rename the output collection as "Tractable Patient Datasets".</li>
<li>Copy the <code>vir2 nucleotide BLAST database</code> from the <code>References</code> history to the current history <code>Input data for Use Case 3-2</code>.</li>
</ul>
<h2 id="history-for-use-case-3-2">History for Use Case 3-2</h2>
<ol>
<li>Stay in the history <code>Input data for Use Case 3-2</code></li>
<li>pick the workflow <code>Metavisitor: Workflow for Use Case 3-2</code> in the workflows menu, and select the <code>run</code> option.</li>
<li>For Step 1 (Fever Patient Sequences collection), select <code>Tractable Patient Datasets</code> (this should be already selected).</li>
<li>For Step 2, select the <code>nucleotide vir2 blast database</code> (this should also be already selected)</li>
<li>As usual, check the box <code>Send results to a new history</code>, edit the name of the new history to <code>History for Use Case 3-2</code>, and <code>Execute</code> the workflow ! Note, that for complex workflows with dataset collections in input, the actual warning that the workflow is started make take time to show up; you can even have a "504 Gateway Time-out" warning. This is not a serious issue: just go in your <code>User</code> -&gt; <code>Saved history</code> menu, you will see you <code>History for Use Case 3-2</code> running and you will be able to access it.</li>
</ol>
<p>As a last note, the workflow for Use Case 3-2 may take a long time. Be patient.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../use_case_3-3/" class="btn btn-neutral float-right" title="Use Case 3-3">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../use_case_3-1/" class="btn btn-neutral" title="Use Case 3-1"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/ARTbio/metavisitor/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../use_case_3-1/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../use_case_3-3/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
